# 決定ログ

このファイルはプロジェクトにおける重要な決定事項を記録します。
2025-03-24 17:51 - 初期化

## アーキテクチャ決定

### エージェント実装戦略
**決定日**: 2025-03-23
**決定内容**: 複雑さと有用性のバランスを考慮した段階的実装アプローチの採用
**根拠**: 
- 学習曲線の最適化
- リスク管理の容易さ
- フィードバックの早期取得
**実装詳細**:
- シンプルなエージェントから開始
- 段階的に複雑性を増加
- 各段階でのフィードバックを収集

### 技術スタック選定
**決定日**: 2025-03-23
**決定内容**: コアフレームワークとフロントエンド技術の選定
**根拠**:
- 開発効率の最適化
- 技術の成熟度
- コミュニティサポート
**実装詳細**:
- Mastraをコアフレームワークとして使用
- Streamlitをメインのフロントエンドとして採用
- 必要に応じて追加ライブラリを導入

### ドキュメント戦略
**決定日**: 2025-03-23
**決定内容**: 包括的なドキュメント管理アプローチの採用
**根拠**:
- 知識共有の最大化
- 開発プロセスの透明性確保
- コミュニティ貢献の促進
**実装詳細**:
- 詳細なコードコメントの維持
- Zennブログ記事による実装プロセスの文書化
- conversationsフォルダでの作業記録保存
- Mastra MCP Serverを活用したドキュメント参照

### バージョン管理戦略
**決定日**: 2025-03-23
**決定内容**: GitHubを使用した体系的なバージョン管理の実施
**根拠**:
- コード管理の効率化
- チーム協業の促進
- 品質管理の強化
**実装詳細**:
- リポジトリ: https://github.com/Milainvest/mastra-ai-agents.git
- 機能別ブランチ戦略の採用

## AI Investment Agent実装計画
**決定日**: 2025-03-24
**決定内容**: Mastraを使用したAI Investment Agentの実装計画の策定
**根拠**: 
- reference/ai_investment_agentに記載されているAI Investment Agentの実装例を参考
- Mastraフレームワークの特性を活かした実装
- ユーザーからのフィードバックに基づく機能優先順位
**実装詳細**:
- 基本機能（株式比較分析、企業情報取得、市場情報取得）を優先実装
- Yahoo Financeをデータソースとして使用
- Streamlitをユーザーインターフェースとして採用
- 段階的に拡張機能（ポートフォリオ分析、投資戦略提案、市場トレンド分析）を追加

## .gitignoreの更新（第1回）
**決定日**: 2025-03-24
**決定内容**: .gitignoreファイルにreferenceフォルダを追加
**根拠**:
- referenceフォルダには実装例が含まれており、バージョン管理から除外する必要がある
**実装詳細**:
- .gitignoreファイルにreferenceフォルダを追加する必要あり（Codeモードで実施）

## .gitignoreの更新（第2回）
**決定日**: 2025-03-24
**決定内容**: .gitignoreファイルの包括的な更新
**根拠**:
- GitHubにアップすべきでないファイルやディレクトリを包括的に除外する必要がある
- 開発環境固有のファイルやキャッシュファイルを除外する
**実装詳細**:
- OS生成ファイル（.DS_Store等）の除外
- IDE関連ファイル（.vscode, .idea等）の除外
- Node.js関連ファイル（node_modules, ログファイル等）の除外
- Python関連ファイル（__pycache__, venv等）の除外
- ビルド出力やキャッシュディレクトリの除外
- 特定のファイルやディレクトリ（mastra-documents, awesome-llm-apps.md等）の除外
- ブランチ命名規則: `feature/agent-name`


## AI Investment Agent実装の改善
**決定日**: 2025-03-24
**決定内容**: Alpha Vantage APIを使用した実装に変更
**根拠**: 
- Yahoo Finance APIへの直接アクセスで「Invalid Crumb」エラーが発生
- yahoo-finance2ライブラリの使用も依存関係の問題で断念
- Alpha Vantage APIは無料で使用でき、必要なデータを取得可能
**実装詳細**:
- alpha-vantage-tool.tsを作成してAlpha Vantage APIを使用
- dotenvパッケージを使用して環境変数からAPIキーを読み込み
- APIエラー時にはフォールバックとしてモックデータを使用

## エージェント出力の改善
**決定日**: 2025-03-24
**決定内容**: エージェントの指示を改善して出力問題を修正
**根拠**: 
- 株式比較の結果に実際の値ではなく「print文」が含まれていた
- エージェントが適切にツールの結果を処理していない
**実装詳細**:
- 「常に実際の値を表示し、コードやprint文を含めないこと」という明示的な指示を追加
- 日本語での指示も同様に追加
- 既存機能への影響を最小化